<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find next CAT item — findNextItem • mirtCAT</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find next CAT item — findNextItem"><meta name="description" content="A function that returns the next item in the computerized adaptive, optimal assembly, or shadow test.
For direction manipulation of the internal objects this function should be used in conjunction
with the updateDesign and customNextItem.
Finally, the raw input forms can be used when a customNextItem function has been
defined in mirtCAT."><meta property="og:description" content="A function that returns the next item in the computerized adaptive, optimal assembly, or shadow test.
For direction manipulation of the internal objects this function should be used in conjunction
with the updateDesign and customNextItem.
Finally, the raw input forms can be used when a customNextItem function has been
defined in mirtCAT."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mirtCAT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.14.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/mirtCAT-vignettes.html">UNKNOWN TITLE</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/philchalmers/mirtCAT/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Find next CAT item</h1>
      <small class="dont-index">Source: <a href="https://github.com/philchalmers/mirtCAT/blob/main/R/findNextCATItem.R" class="external-link"><code>R/findNextCATItem.R</code></a></small>
      <div class="d-none name"><code>findNextItem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function that returns the next item in the computerized adaptive, optimal assembly, or shadow test.
For direction manipulation of the internal objects this function should be used in conjunction
with the <code><a href="updateDesign.html">updateDesign</a></code> and <code>customNextItem</code>.
Finally, the raw input forms can be used when a <code>customNextItem</code> function has been
defined in <code><a href="mirtCAT.html">mirtCAT</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">findNextItem</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  person <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  criteria <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  objective <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  all_index <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of class 'mirtCAT_design' returned from the <code><a href="mirtCAT.html">mirtCAT</a></code> function
when passing <code>design_elements = TRUE</code></p></dd>


<dt id="arg-person">person<a class="anchor" aria-label="anchor" href="#arg-person"></a></dt>
<dd><p>(required when <code>x</code> is missing) internal person object. To be
used when <code>customNextItem</code> function has been defined</p></dd>


<dt id="arg-test">test<a class="anchor" aria-label="anchor" href="#arg-test"></a></dt>
<dd><p>(required when <code>x</code> is missing) internal test object. To be
used when <code>customNextItem</code> function has been defined</p></dd>


<dt id="arg-design">design<a class="anchor" aria-label="anchor" href="#arg-design"></a></dt>
<dd><p>(required when <code>x</code> is missing) internal design object. To be
used when <code>customNextItem</code> function has been defined</p></dd>


<dt id="arg-criteria">criteria<a class="anchor" aria-label="anchor" href="#arg-criteria"></a></dt>
<dd><p>item selection criteria (see <code><a href="mirtCAT.html">mirtCAT</a></code>'s <code>criteria</code> input).
If not specified the value from <code>extract.mirtCAT(design, 'criteria')</code> will be used</p></dd>


<dt id="arg-objective">objective<a class="anchor" aria-label="anchor" href="#arg-objective"></a></dt>
<dd><p>a vector of values used as the optimization criteria to be passed to
<code>lp(objective.in)</code>. This is typically the vector of criteria values returned from
<code><a href="computeCriteria.html">computeCriteria</a></code>, however supplying other
criteria are possible (e.g., to minimize the number of items administered simply pass a vector
of -1's)</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>an integer vector indicating which items should be included in the optimal search;
the default <code>NULL</code> includes all possible items. To allow only the first 10 items to be
selected from this can be modified to <code>subset = 1:10</code>. This is useful when administering
a multi-unidimensional CAT session where unidimensional blocks should be clustered together
for smoother presentation. Useful when using the <code>customNextItem</code> function in
<code><a href="mirtCAT.html">mirtCAT</a></code></p></dd>


<dt id="arg-all-index">all_index<a class="anchor" aria-label="anchor" href="#arg-all-index"></a></dt>
<dd><p>logical; return all items instead of just the most optimal?
When <code>TRUE</code> a vector of items is returned instead of the most optimal,
where the items are sorted according to how
well they fit the criteria (e.g., the first element is the most optimal, followed by the second
most optimal, and so on). Note that this does not work for some selection criteria (e.g.,
'seq' or 'random')</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments to be passed to <code><a href="https://rdrr.io/pkg/lpSolve/man/lp.html" class="external-link">lp</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>typically returns an integer value indicating the index of the next item to be selected or a
  value of <code>NA</code> to indicate that the test should be terminated. However, see the arguments for
  further returned object descriptions</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When a numeric <code>objective</code> is supplied the next item in the computerized adaptive test is found via
an integer solver through searching for a maximum. The raw input forms can be used
when a <code>customNextItem</code> function has been defined in <code><a href="mirtCAT.html">mirtCAT</a></code>, and requires
the definition of a <code>constr_fun</code> (see the associated element in <code><a href="mirtCAT.html">mirtCAT</a></code> for details,
as well as the examples below). Can be used to for 'Optimal Test Assembly',
as well as 'Shadow Testing' designs (van der Linden, 2005),
by using the <code><a href="https://rdrr.io/pkg/lpSolve/man/lp.html" class="external-link">lp</a></code> function. When <code>objective</code> is not supplied the result follows the
typical maximum criteria of more standard adaptive tests.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Chalmers, R., P. (2012). mirt: A Multidimensional Item Response Theory
Package for the R Environment. <em>Journal of Statistical Software, 48</em>(6), 1-29.
<a href="https://doi.org/10.18637/jss.v048.i06" class="external-link">doi:10.18637/jss.v048.i06</a></p>
<p>Chalmers, R. P. (2016). Generating Adaptive and Non-Adaptive Test Interfaces for
Multidimensional Item Response Theory Applications. <em>Journal of Statistical Software, 71</em>(5),
1-39. <a href="https://doi.org/10.18637/jss.v071.i05" class="external-link">doi:10.18637/jss.v071.i05</a></p>
<p>van der Linden, W. J. (2005). Linear models for optimal test design. Springer.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="mirtCAT.html">mirtCAT</a></code>, <code><a href="updateDesign.html">updateDesign</a></code>, <code><a href="extract.mirtCAT.html">extract.mirtCAT</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># test defined in mirtCAT help file, first example </span></span></span>
<span class="r-in"><span><span class="co"># equivalent to criteria = 'MI'</span></span></span>
<span class="r-in"><span><span class="va">customNextItem</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">design</span>, <span class="va">person</span>, <span class="va">test</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">item</span> <span class="op">&lt;-</span> <span class="fu">findNextItem</span><span class="op">(</span>person<span class="op">=</span><span class="va">person</span>, design<span class="op">=</span><span class="va">design</span>, test<span class="op">=</span><span class="va">test</span>,</span></span>
<span class="r-in"><span>                        criteria <span class="op">=</span> <span class="st">'MI'</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">item</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nitems</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="va">itemnames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'Item.'</span>, <span class="fl">1</span><span class="op">:</span><span class="va">nitems</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span><span class="va">nitems</span>, <span class="fl">.2</span>, <span class="fl">.3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">nitems</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mirt/man/simdata.html" class="external-link">simdata</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">d</span>, <span class="fl">500</span>, itemtype <span class="op">=</span> <span class="st">'dich'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">itemnames</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mirt/man/mirt.html" class="external-link">mirt</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fl">1</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simple math items</span></span></span>
<span class="r-in"><span><span class="va">questions</span> <span class="op">&lt;-</span> <span class="va">answers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="va">nitems</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="va">nitems</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">spacing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="va">d</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span> <span class="co">#easier items have more variation in the options</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">nitems</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="va">n1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">n2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">51</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">ans</span> <span class="op">&lt;-</span> <span class="va">n1</span> <span class="op">+</span> <span class="va">n2</span></span></span>
<span class="r-in"><span> <span class="va">questions</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">n1</span>, <span class="st">' + '</span>, <span class="va">n2</span>, <span class="st">' = ?'</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">answers</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ans</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">ch</span> <span class="op">&lt;-</span> <span class="va">ans</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span><span class="op">:</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="va">spacing</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">ch</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">ans</span></span></span>
<span class="r-in"><span> <span class="va">choices</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ch</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Question<span class="op">=</span><span class="va">questions</span>, Option<span class="op">=</span><span class="va">choices</span>, </span></span>
<span class="r-in"><span>              Type <span class="op">=</span> <span class="st">'radio'</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>   </span></span>
<span class="r-in"><span><span class="va">response</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_pattern.html">generate_pattern</a></span><span class="op">(</span><span class="va">mod</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirtCAT.html">mirtCAT</a></span><span class="op">(</span>mo<span class="op">=</span><span class="va">mod</span>, local_pattern <span class="op">=</span> <span class="va">response</span>, </span></span>
<span class="r-in"><span>                  design <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>customNextItem<span class="op">=</span><span class="va">customNextItem</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                </span></span>
<span class="r-in"><span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span></span></span>
<span class="r-in"><span><span class="co"># direct manipulation of internal objects</span></span></span>
<span class="r-in"><span><span class="va">CATdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirtCAT.html">mirtCAT</a></span><span class="op">(</span>df<span class="op">=</span><span class="va">df</span>, mo<span class="op">=</span><span class="va">mod</span>, criteria <span class="op">=</span> <span class="st">'MI'</span>, design_elements <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># returns number 1 in this case, since that's the starting item</span></span></span>
<span class="r-in"><span><span class="fu">findNextItem</span><span class="op">(</span><span class="va">CATdesign</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># determine next item if item 1 and item 10 were answered correctly</span></span></span>
<span class="r-in"><span><span class="va">CATdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="updateDesign.html">updateDesign</a></span><span class="op">(</span><span class="va">CATdesign</span>, new_item <span class="op">=</span> <span class="fl">1</span>, new_response <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract.mirtCAT.html">extract.mirtCAT</a></span><span class="op">(</span><span class="va">CATdesign</span><span class="op">$</span><span class="va">person</span>, <span class="st">'thetas'</span><span class="op">)</span> <span class="co"># updated thetas</span></span></span>
<span class="r-in"><span><span class="va">CATdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="updateDesign.html">updateDesign</a></span><span class="op">(</span><span class="va">CATdesign</span>, new_item <span class="op">=</span> <span class="fl">10</span>, new_response <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract.mirtCAT.html">extract.mirtCAT</a></span><span class="op">(</span><span class="va">CATdesign</span><span class="op">$</span><span class="va">person</span>, <span class="st">'thetas'</span><span class="op">)</span> <span class="co"># updated thetas again</span></span></span>
<span class="r-in"><span><span class="fu">findNextItem</span><span class="op">(</span><span class="va">CATdesign</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">findNextItem</span><span class="op">(</span><span class="va">CATdesign</span>, all_index <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># all items rank in terms of most optimal</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#-------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Integer programming example (e.g., shadow testing)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find maximum information subject to constraints</span></span></span>
<span class="r-in"><span><span class="co">#  sum(xi) &lt;= 5               ### 5 or fewer items</span></span></span>
<span class="r-in"><span><span class="co">#  x1 + x2 &lt;= 1               ### items 1 and 2 can't be together</span></span></span>
<span class="r-in"><span><span class="co">#  x4 == 0                    ### item 4 not included</span></span></span>
<span class="r-in"><span><span class="co">#  x5 + x6 == 1               ### item 5 or 6 must be included, but not both</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># constraint function</span></span></span>
<span class="r-in"><span><span class="va">constr_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">design</span>, <span class="va">person</span>, <span class="va">test</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># left hand side constrains</span></span></span>
<span class="r-in"><span>  <span class="co">#    - 1 row per constraint, and ncol must equal number of items</span></span></span>
<span class="r-in"><span>  <span class="va">mo</span> <span class="op">&lt;-</span> <span class="fu"><a href="extract.mirtCAT.html">extract.mirtCAT</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">'mo'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">nitems</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mirt/man/extract.mirt.html" class="external-link">extract.mirt</a></span><span class="op">(</span><span class="va">mo</span>, <span class="st">'nitems'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">lhs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, <span class="va">nitems</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">lhs</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="va">lhs</span><span class="op">[</span><span class="fl">2</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="va">lhs</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="va">lhs</span><span class="op">[</span><span class="fl">4</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># relationship direction</span></span></span>
<span class="r-in"><span>  <span class="va">dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;="</span>, <span class="st">"&lt;="</span>, <span class="st">'=='</span>, <span class="st">'=='</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#right hand side</span></span></span>
<span class="r-in"><span>  <span class="va">rhs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#all together</span></span></span>
<span class="r-in"><span>  <span class="va">constraints</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">lhs</span>, <span class="va">dirs</span>, <span class="va">rhs</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">constraints</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">CATdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="mirtCAT.html">mirtCAT</a></span><span class="op">(</span>df<span class="op">=</span><span class="va">df</span>, mo<span class="op">=</span><span class="va">mod</span>, design_elements <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                     design <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>constr_fun<span class="op">=</span><span class="va">constr_fun</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># MI criteria value associated with each respective item</span></span></span>
<span class="r-in"><span><span class="va">objective</span> <span class="op">&lt;-</span> <span class="fu"><a href="computeCriteria.html">computeCriteria</a></span><span class="op">(</span><span class="va">CATdesign</span>, criteria <span class="op">=</span> <span class="st">'MI'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># most optimal item, given constraints</span></span></span>
<span class="r-in"><span><span class="fu">findNextItem</span><span class="op">(</span><span class="va">CATdesign</span>, objective<span class="op">=</span><span class="va">objective</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># all the items which solve the problem</span></span></span>
<span class="r-in"><span><span class="fu">findNextItem</span><span class="op">(</span><span class="va">CATdesign</span>, objective<span class="op">=</span><span class="va">objective</span>, all_index <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## within a customNextItem() definition the above code would look like</span></span></span>
<span class="r-in"><span><span class="co"># customNextItem &lt;- function(design, person, test){</span></span></span>
<span class="r-in"><span><span class="co">#   objective &lt;- computeCriteria(person=person, design=design, test=test,</span></span></span>
<span class="r-in"><span><span class="co">#                                criteria = 'MI')</span></span></span>
<span class="r-in"><span><span class="co">#   item &lt;- findNextItem(person=person, design=design, test=test,</span></span></span>
<span class="r-in"><span><span class="co">#                        objective=objective)</span></span></span>
<span class="r-in"><span><span class="co">#   item</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Phil Chalmers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

